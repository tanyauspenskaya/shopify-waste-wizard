{"version":3,"sources":["assets/icons.svg","components/Header.js","components/SearchBar.js","components/ResultItem.js","components/Results.js","components/Favourites.js","apis/wasteWizard.js","components/App.js","index.js"],"names":["module","exports","__webpack_require__","p","Header","react_default","a","createElement","className","SearchBar","state","term","onInputChange","e","_this","setState","target","value","length","props","onSearchClear","onFormSubmit","preventDefault","trim","onSubmit","this","type","onChange","xmlns","viewBox","href","icon","Component","ResultItem","_ref","htmlContent","result","handleFavourites","favourite","onClick","title","dangerouslySetInnerHTML","description","__html","DOMParser","parseFromString","body","textContent","Results","msg","results","errMsg","resultsList","map","components_ResultItem","key","id","Favourites","favourites","favouritesList","wasteData","axios","get","App","data","message","componentDidMount","then","res","newRes","item","index","catch","err","concat","onSearchSubmit","searchTerm","toLowerCase","searchResults","filter","keywords","includes","favsUpdated","Object","toConsumableArray","fav","findIndex","el","newResults","indexData","newData","components_Header","components_SearchBar","components_Results","components_Favourites","ReactDOM","render","components_App","document","querySelector"],"mappings":"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","file":"static/js/main.e7dd8251.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/icons.0415de8e.svg\";","import React from 'react';\n\nconst Header = () => {\n  return(\n    <header className=\"header\">\n      <h1 className=\"header__title\">Toronto Waste Lookup</h1>\n    </header>\n  );\n};\n\nexport default Header;","import icon from '../assets/icons.svg';\nimport React, { Component } from 'react';\n\nclass SearchBar extends Component {\n  state = { term: '' };\n\n  onInputChange = e => {\n    this.setState({ term: e.target.value });\n    if (!e.target.value.length) {\n      this.props.onSearchClear();\n    }\n  }\n\n  onFormSubmit = e => {\n    e.preventDefault();\n    if (this.state.term.trim().length) {\n      this.props.onFormSubmit(this.state.term);\n    }\n  }\n\n  render() {\n    return(\n      <section className=\"search__section\">\n        <form \n          className=\"search__form\"\n          onSubmit={this.onFormSubmit}\n        >\n          <input\n            type=\"text\" \n            value={this.state.term}\n            onChange={this.onInputChange} \n            className=\"search__input\"\n          />\n          <button \n            type=\"submit\" \n            className=\"search__submit\"\n          >\n            <svg \n              className=\"search__magnifier\" \n              xmlns=\"http://www.w3.org/2000/svg\" \n              viewBox=\"0 0 50 50\"\n            >\n              <use href={icon + '#search'}></use>\n            </svg>\n          </button>\n        </form>\n      </section>\n    );\n  }\n}\n\nexport default SearchBar;","import icon from '../assets/icons.svg';\nimport React from 'react';\n\nconst ResultItem = ({ result, handleFavourites }) => { \n  \n  const parseHTML = htmlContent => {\n    let parser = new DOMParser();\n    let parsedHtml = parser.parseFromString(htmlContent, 'text/html').body.textContent;\n    return { __html: parsedHtml };\n  }\n\n  const handleClick = () => {\n    handleFavourites(result);\n  }\n\n  return(\n    <div className=\"result__item\">\n      <div className=\"result__title\">\n        <button \n          className={\"result__btn \" + (result.favourite ? 'result__btn--green' : 'result__btn--grey')}\n          onClick={handleClick}\n        >\n          <svg \n            className=\"result__star\" \n            xmlns=\"http://www.w3.org/2000/svg\" \n            viewBox=\"0 0 50 47.86\"\n          >\n            <use href={icon + '#star'}></use>\n          </svg>\n        </button>\n        <h3 className=\"result__name\">\n          {result.title}\n        </h3>\n      </div>\n      <div \n        className=\"result__description\" \n        dangerouslySetInnerHTML={parseHTML(result.description)}\n      >\n      </div>\n    </div>\n  );\n};\n\nexport default ResultItem;","import icon from '../assets/icons.svg';\nimport React from 'react';\nimport ResultItem from './ResultItem';\n\nconst Results = ({ results, handleFavourites, errMsg }) => {\n  const resultsList = results.map(result => {\n    return(\n      <ResultItem \n        key={result.id}\n        result={result}\n        handleFavourites={handleFavourites}\n      />\n    );\n  });\n\n  const renderErrorMessage = msg => {\n    if (msg.length) {\n      return(\n        <div className=\"result__error\">\n          <svg className=\"result__walle\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n            <use href={icon + '#wall-e'}></use>\n          </svg>\n          <p>{msg}</p>\n        </div>\n      );\n    }\n    return '';\n  }\n\n  return(\n    <section className=\"result__section\">\n      <div className=\"result__list\">\n        {resultsList}\n        {renderErrorMessage(errMsg)}\n      </div>\n    </section>\n  );\n};\n\nexport default Results;","import React from 'react';\nimport ResultItem from './ResultItem';\n\nconst Favourites = ({ favourites, handleFavourites }) => {\n  const favouritesList = favourites.map(result => {\n    return(\n      <ResultItem \n        key={result.id}\n        result={result}\n        handleFavourites={handleFavourites}\n      />\n    );\n  });\n\n  return(\n    <section className=\"result__section result__section--favourite\">\n      <div className=\"result__list\">\n        <h2 className=\"result__header\">Favourites</h2>\n        {favouritesList}\n      </div>\n    </section>\n  );\n};\n\nexport default Favourites;","import axios from 'axios';\n\nconst wasteData = () => {\n  return axios.get('https://secure.toronto.ca/cc_sr_v1/data/swm_waste_wizard_APR?limit=1000');\n};\n\nexport default wasteData;\n","import '../stylesheets/main.scss';\nimport React, { Component } from 'react';\nimport Header from './Header';\nimport SearchBar from './SearchBar';\nimport Results from './Results';\nimport Favourites from './Favourites';\nimport wasteData from '../apis/wasteWizard';\n\nclass App extends Component {\n  state = {\n    data: [],\n    results: [],\n    favourites: [],\n    message: ''\n  };\n\n  componentDidMount = () => {\n    wasteData()\n    .then(res => {\n      const newRes = res.data.map((item, index) => {\n        item.index = index;\n        item.favourite = false;\n        return item;\n      });\n      this.setState({ data: newRes });\n    })\n    .catch(err => {\n      this.setState({ message: `Something went wrong. ${err}. Please try again.` });\n    });\n  }\n\n  onSearchSubmit = (term) => {\n    const searchTerm = term.toLowerCase();\n    const data = this.state.data;\n    const searchResults = data.filter(item => {\n      return item.keywords.toLowerCase().includes(searchTerm);\n    })\n    .map(item => {\n      return {\n        id: item.index,\n        title: item.title,\n        description: item.body,\n        favourite: item.favourite\n      }\n    });\n    this.setState({ results: searchResults });\n    if (!searchResults.length) {\n      this.setState({ message: 'No results found. Please try again.' });\n    }\n  }\n\n  onSearchClear = () => {\n    this.setState({ results: [], message: '' });\n  }\n\n  handleFavourites = (item) => {\n    item.favourite = !item.favourite;\n\n    if (item.favourite) {\n      // add to favourites\n      const favsUpdated = [...this.state.favourites, item];\n      this.setState({ favourites: favsUpdated });\n    } else {\n      // remove from favourites\n      const favsUpdated = this.state.favourites.filter(fav => fav.id !== item.id);\n      this.setState({ favourites: favsUpdated });\n    }\n    // update results state\n    const index = this.state.results.findIndex(el => el.id === item.id);\n    const newResults = this.state.results;\n    newResults[index] = item;\n    this.setState({ results: newResults });\n    // update data state\n    const indexData = this.state.data.findIndex(el => el.index === item.id);\n    const newData = this.state.data;\n    newData[indexData].favourite = item.favourite;\n    this.setState({ data: newData });\n  }\n\n  render(){\n    return(\n      <div className=\"app\">\n        <Header />\n        <SearchBar \n          onFormSubmit={this.onSearchSubmit} \n          onSearchClear={this.onSearchClear} \n        />\n        <Results \n          results={this.state.results} \n          handleFavourites={this.handleFavourites}\n          errMsg={this.state.message}\n        />\n        <Favourites\n          favourites={this.state.favourites}\n          handleFavourites={this.handleFavourites}\n        />\n      </div>\n    );\n  }\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\n\nReactDOM.render(\n  <App />,\n  document.querySelector('#root')\n);"],"sourceRoot":""}
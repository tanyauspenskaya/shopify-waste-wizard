(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,a){e.exports=a(45)},2:function(e,t,a){e.exports=a.p+"static/media/icons.0415de8e.svg"},24:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(15),i=a.n(s),o=a(17),l=a(3),u=a(4),c=a(6),m=a(5),h=a(7),v=(a(24),function(){return n.a.createElement("header",{className:"header"},n.a.createElement("h1",{className:"header__title"},"Toronto Waste Lookup"))}),f=a(2),d=a.n(f),_=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state={term:""},a.onInputChange=function(e){a.setState({term:e.target.value}),e.target.value.length||a.props.onSearchClear()},a.onFormSubmit=function(e){e.preventDefault(),a.state.term.trim().length&&a.props.onFormSubmit(a.state.term)},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return n.a.createElement("section",{className:"search__section"},n.a.createElement("form",{className:"search__form",onSubmit:this.onFormSubmit},n.a.createElement("input",{type:"text",value:this.state.term,onChange:this.onInputChange,className:"search__input"}),n.a.createElement("button",{type:"submit",className:"search__submit"},n.a.createElement("svg",{className:"search__magnifier",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50"},n.a.createElement("use",{href:d.a+"#search"})))))}}]),t}(r.Component),p=function(e){var t,a=e.result,r=e.handleFavourites;return n.a.createElement("div",{className:"result__item"},n.a.createElement("div",{className:"result__title"},n.a.createElement("button",{className:"result__btn "+(a.favourite?"result__btn--green":"result__btn--grey"),onClick:function(){r(a)}},n.a.createElement("svg",{className:"result__star",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 47.86"},n.a.createElement("use",{href:d.a+"#star"}))),n.a.createElement("h3",{className:"result__name"},a.title)),n.a.createElement("div",{className:"result__description",dangerouslySetInnerHTML:(t=a.description,{__html:(new DOMParser).parseFromString(t,"text/html").body.textContent})}))},g=function(e){var t,a=e.results,r=e.handleFavourites,s=e.errMsg,i=a.map(function(e){return n.a.createElement(p,{key:e.id,result:e,handleFavourites:r})});return n.a.createElement("section",{className:"result__section"},n.a.createElement("div",{className:"result__list"},i,(t=s).length?n.a.createElement("div",{className:"result__error"},n.a.createElement("svg",{className:"result__walle",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},n.a.createElement("use",{href:d.a+"#wall-e"})),n.a.createElement("p",null,t)):""))},w=function(e){var t=e.favourites,a=e.handleFavourites,r=t.map(function(e){return n.a.createElement(p,{key:e.id,result:e,handleFavourites:a})});return n.a.createElement("section",{className:"result__section result__section--favourite"},n.a.createElement("div",{className:"result__list"},n.a.createElement("h2",{className:"result__header"},"Favourites"),r))},E=a(16),b=a.n(E),S=function(){return b.a.get("https://secure.toronto.ca/cc_sr_v1/data/swm_waste_wizard_APR?limit=1000")},N=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state={data:[],results:[],favourites:[],message:""},a.componentDidMount=function(){S().then(function(e){var t=e.data.map(function(e,t){return e.index=t,e.favourite=!1,e});a.setState({data:t})}).catch(function(e){a.setState({message:"Something went wrong. ".concat(e,". Please try again.")})})},a.onSearchSubmit=function(e){var t=e.toLowerCase(),r=a.state.data.filter(function(e){return e.keywords.toLowerCase().includes(t)}).map(function(e){return{id:e.index,title:e.title,description:e.body,favourite:e.favourite}});a.setState({results:r}),r.length||a.setState({message:"No results found. Please try again."})},a.onSearchClear=function(){a.setState({results:[],message:""})},a.handleFavourites=function(e){if(e.favourite=!e.favourite,e.favourite){var t=[].concat(Object(o.a)(a.state.favourites),[e]);a.setState({favourites:t})}else{var r=a.state.favourites.filter(function(t){return t.id!==e.id});a.setState({favourites:r})}var n=a.state.results.findIndex(function(t){return t.id===e.id}),s=a.state.results;s[n]=e,a.setState({results:s});var i=a.state.data.findIndex(function(t){return t.index===e.id}),l=a.state.data;l[i].favourite=e.favourite,a.setState({data:l})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"app"},n.a.createElement(v,null),n.a.createElement(_,{onFormSubmit:this.onSearchSubmit,onSearchClear:this.onSearchClear}),n.a.createElement(g,{results:this.state.results,handleFavourites:this.handleFavourites,errMsg:this.state.message}),n.a.createElement(w,{favourites:this.state.favourites,handleFavourites:this.handleFavourites}))}}]),t}(r.Component);i.a.render(n.a.createElement(N,null),document.querySelector("#root"))}},[[18,2,1]]]);
//# sourceMappingURL=main.e7dd8251.chunk.js.map